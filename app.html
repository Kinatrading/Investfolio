<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Steam Invest Ultra</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="window" id="body">
  <header class="bar">
    <h1>Steam Invest Ultra (‚Ç¥) <span id="hdrUnreal" class="badge big"></span></h1>
    <div class="spacer"></div>
    <input id="search" placeholder="–ü–æ—à—É–∫/—Ç–µ–≥–∏‚Ä¶" />
    <button id="scanAllBtn" title="–ü–æ—Å–ª—ñ–¥–æ–≤–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ API">–°–∫–∞–Ω—É–≤–∞—Ç–∏ –≤—Å—ñ API</button>
    <button id="openAllBtn" title="–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤—Å—ñ API —É –≤–∫–ª–∞–¥–∫–∞—Ö">–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤—Å—ñ API</button>
    <button id="exportJsonBtn">–ï–∫—Å–ø–æ—Ä—Ç JSON</button>
    <label class="fileLabel">–Ü–º–ø–æ—Ä—Ç JSON<input type="file" id="importFile" accept="application/json" hidden/></label>
    <button id="clearBtn" class="danger">–û—á–∏—Å—Ç–∏—Ç–∏</button>
    <button id="themeBtn" title="–¢–µ–º–∞">üåì</button>
  </header>

  <section class="card">
    <h2>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2>
    <div class="grid four">
      <div>
        <label>–ö–æ–º—ñ—Å—ñ—è Steam (–¥–µ—Ñ.), %</label>
        <input id="feePct" type="number" min="0" max="50" step="0.1" />
      </div>
      <div>
        <label>–ê–≤—Ç–æ-–æ–Ω–æ–≤–ª–µ–Ω–Ω—è, —Ö–≤ (0=–≤–∏–º–∫)</label>
        <input id="autoRefreshMinutes" type="number" min="0" step="1" />
      </div>
      <div>
        <label>–ó–∞—Ç—Ä–∏–º–∫–∞ batch, –º—Å</label>
        <input id="batchDelayMs" type="number" min="50" step="50" />
      </div>
      <div>
        <label>–û—Ü—ñ–Ω–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è</label>
        <select id="valuationMode">
          <option value="sell">–ó–∞ 1-—é —Ü—ñ–Ω–æ—é –ø—Ä–æ–¥–∞–∂—É (–ª–∏—Å—Ç–∏–Ω–≥)</option>
          <option value="buy">–ó–∞ 1-–º buy-order (–º–∏—Ç—Ç—î–≤–∏–π –ø—Ä–æ–¥–∞–∂)</option>
        </select>
      </div>
    </div>
    <div class="row-inline mt6">
      <button id="saveSettingsBtn">–ó–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
    </div>
  </section>

  <section class="card">
    <h2>–î–æ–¥–∞—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç</h2>
    <div class="grid four">
      <div>
        <label>–ù–∞–∑–≤–∞</label>
        <input id="name" placeholder="–ù–∞–ø—Ä., Sticker | NiP (Holo) | Stockholm 2021"/>
      </div>
      <div>
        <label>–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∫–æ–º—É)</label>
        <input id="tags" placeholder="stickers, 2021, nip"/>
      </div>
      <div>
        <label>–õ—ñ–Ω–∫ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç</label>
        <input id="itemUrl" type="url" placeholder="https://steamcommunity.com/market/listings/..."/>
      </div>
      <div>
        <label>API URL (itemordershistogram)</label>
        <input id="apiUrl" type="url" placeholder="https://steamcommunity.com/market/itemordershistogram?..."/>
      </div>
    </div>
    <div class="row-inline mt6">
      <button id="createItemBtn">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ–∑–∏—Ü—ñ—é</button>
    </div>
  </section>

  <section class="card">
    <h2>–û–ø–µ—Ä–∞—Ü—ñ—ó —Ç–∞ —Ä–∏–Ω–æ–∫</h2>
    <div class="grid four">
      <div>
        <label>–û–±—Ä–∞–Ω–∞ –ø–æ–∑–∏—Ü—ñ—è</label>
        <select id="itemSelect"></select>
      </div>
      <div>
        <label>–î–∞—Ç–∞</label>
        <input id="opDate" type="date"/>
      </div>
      <div>
        <label>–†–∏–Ω–æ–∫</label>
        <div class="row-inline">
          <button id="fetchBtn" title="–û–Ω–æ–≤–∏—Ç–∏ —Ü—ñ–Ω–∏ –∑ API">–û–Ω–æ–≤–∏—Ç–∏ —Ü—ñ–Ω–∏</button>
          <span id="mkt" class="note"></span>
        </div>
      </div>
      <div>
        <label>–õ—ñ–Ω–∫–∏</label>
        <div id="links"></div>
        <div class="mt6">
          <button id="editLinksBtn">‚úé –õ—ñ–Ω–∫–∏/–∫–æ–º—ñ—Å—ñ—è/—Ç–µ–≥–∏</button>
        </div>
      </div>
    </div>

    <div class="grid three ops">
      <div class="op">
        <h3>–ö—É–ø—ñ–≤–ª—è (–¥–æ–¥–∞—Ç–∏)</h3>
        <label>–ö-—Å—Ç—å</label><input id="buyQty" type="number" min="1" step="1" value="1"/>
        <label>–¶—ñ–Ω–∞, –≥—Ä–Ω</label><input id="buyPrice" type="number" step="0.01" min="0"/>
        <button id="addBuyBtn">–î–æ–¥–∞—Ç–∏ –∫—É–ø—ñ–≤–ª—é</button>
      </div>

      <div class="op">
        <h3>–ü—Ä–æ–¥–∞–∂ (—Å–ø–∏—Å–∞—Ç–∏)</h3>
        <label>–ö-—Å—Ç—å</label><input id="sellQty" type="number" min="1" step="1" value="1"/>
        <label>–¶—ñ–Ω–∞, –≥—Ä–Ω</label><input id="sellPrice" type="number" step="0.01" min="0"/>
        <label>–ö–æ–º—ñ—Å—ñ—è, % (–æ–ø—Ü.)</label><input id="itemFeePct" type="number" min="0" max="50" step="0.1" placeholder="–∑–∞ –∑–∞–º–æ–≤—á. —ñ–∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å"/>
        <button id="addSellBtn">–î–æ–¥–∞—Ç–∏ –ø—Ä–æ–¥–∞–∂</button>
      </div>

      <div class="op">
        <h3>Break-even & ROI</h3>
        <div id="breakeven"></div>
        <div class="row-inline mt6">
          <input id="roiTarget" type="number" step="1" placeholder="ROI % (–Ω–∞–ø—Ä., 15)"/>
          <button id="calcRoiBtn">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
        </div>
        <div id="roiOut" class="note"></div>
      </div>
    </div>

    <div class="grid two mt6">
      <div>
        <h3>–ì–ª–∏–±–∏–Ω–∞ —Ä–∏–Ω–∫—É (Top-5)</h3>
        <table id="depth"><thead><tr><th>–¢–∏–ø</th><th>–¶—ñ–Ω–∞</th><th>–ö-—Å—Ç—å</th><th>–ö—É–º—É–ª—è—Ç–∏–≤</th></tr></thead><tbody></tbody></table>
      </div>
      <div>
        <h3>–ì—Ä–∞—Ñ—ñ–∫ (–æ–±—Ä–∞–Ω–∞ –ø–æ–∑–∏—Ü—ñ—è)</h3>
        <canvas id="chart" width="540" height="160"></canvas>
      </div>
    </div>
  </section>

  <section class="card">
    <h2>–ü–æ—Ä—Ç—Ñ–µ–ª—å</h2>
    <div class="table-wrap">
      <table id="tbl">
        <thead>
<thead>
  <tr>
    <th class="sortable" data-sort="name">–ù–∞–∑–≤–∞ <span class="arrow"></span></th>
    <th>–¢–µ–≥–∏</th>
    <th class="sortable" data-sort="qty">–ö-—Å—Ç—å <span class="arrow"></span></th>
    <th class="sortable" data-sort="avg">–°–µ—Ä. —Å–æ–±—ñ–≤–∞—Ä—Ç—ñ—Å—Ç—å <span class="arrow"></span></th>
    <th class="sortable" data-sort="invested">–ù–µ—Ç—Ç–æ –≤–∫–ª–∞–¥–µ–Ω–æ <span class="arrow"></span></th>
    <th class="sortable" data-sort="market">–ú–∞—Ä–∫–µ—Ç —Ü—ñ–Ω–∞ <span class="arrow"></span></th>
    <th class="sortable" data-sort="unreal">Unrealized <span class="arrow"></span></th>
    <th class="sortable" data-sort="roi">ROI % <span class="arrow"></span></th>
    <th class="sortable" data-sort="vol">œÉ (vol) <span class="arrow"></span></th>
    <th class="sortable" data-sort="sell1">1-–π sell <span class="arrow"></span></th>
    <th class="sortable" data-sort="buy1">1-–π buy <span class="arrow"></span></th>
    <th>Alert Buy ‚â§</th>
    <th>Alert Sell (–Ω–µ—Ç—Ç–æ) ‚â•</th>
    <th>Item URL</th>
    <th>API URL</th>
    <th>Alert —Å—Ç–∞—Ç—É—Å</th>
    <th class="sortable" data-sort="last">–û—Å—Ç–∞–Ω–Ω—î <span class="arrow"></span></th>
    <th></th>
  </tr>
</thead>

        <tbody></tbody>
      </table>
    </div>
    <div id="summary"></div>
  </section>

  <section class="card">
    <h2>–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h2>
    <div class="grid four">
      <div><div class="note">Auto-refresh (—Ö–≤)</div><div id="d_alarm"></div></div>
      <div><div class="note">Alarm set at</div><div id="d_alarm_at"></div></div>
      <div><div class="note">Last batch</div><div id="d_batch"></div></div>
      <div><div class="note">Items/Errors/Time</div><div id="d_stats"></div></div>
    </div>
    <div class="row-inline mt6">
      <button id="diagRefresh">–û–Ω–æ–≤–∏—Ç–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É</button>
      <button id="diagBatch">–ü—Ä–∏–º—É—Å–∏—Ç–∏ batch</button>
      <button id="diagTest">–¢–µ—Å—Ç–æ–≤–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è</button>
    </div>
    <div class="mt6">
      <label>–ñ—É—Ä–Ω–∞–ª (–æ—Å—Ç. 200):</label>
      <textarea id="diagLog" style="width:100%;height:140px;"></textarea>
    </div>
  </section>

  <section class="card">
    <h2>–Ü—Å—Ç–æ—Ä—ñ—è –æ–ø–µ—Ä–∞—Ü—ñ–π</h2>
    <div class="table-wrap">
      <table id="hist">
        <thead>
          <tr>
            <th>–î–∞—Ç–∞</th><th>–¢–∏–ø</th><th>–ù–∞–∑–≤–∞</th><th>–ö-—Å—Ç—å</th><th>–¶—ñ–Ω–∞</th><th>Avg @</th><th>Realized PnL</th><th></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <script src="app.js"></script>
</body>
</html>
